import subprocess

def check_disk_usage(threshold=90):
    # –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–º–∞–Ω–¥—É 'df -h /' (–ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä–Ω–µ–≤–æ–π —Ä–∞–∑–¥–µ–ª)
    # capture_output=True ‚Äî —á—Ç–æ–±—ã –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –≤—ã–≤–æ–¥ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
    # text=True ‚Äî —á—Ç–æ–±—ã –≤—ã–≤–æ–¥ –±—ã–ª —Å—Ç—Ä–æ–∫–æ–π, –∞ –Ω–µ –±–∞–π—Ç–∞–º–∏
    try:
        result = subprocess.run(['df', '-h', '/'], capture_output=True, text=True)
        
        # –í—ã–≤–æ–¥ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:
        # Filesystem      Size  Used Avail Use% Mounted on
        # /dev/sda1       50G   25G   25G  50% /
        
        # –†–∞–∑–±–∏–≤–∞–µ–º –≤—ã–≤–æ–¥ –Ω–∞ —Å—Ç—Ä–æ–∫–∏
        lines = result.stdout.strip().split('\n')
        
        # –ë–µ—Ä–µ–º –≤—Ç–æ—Ä—É—é —Å—Ç—Ä–æ–∫—É (–ø–µ—Ä–≤–∞—è - —ç—Ç–æ –∑–∞–≥–æ–ª–æ–≤–∫–∏)
        data_line = lines[1]
        
        # –†–∞–∑–±–∏–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É –ø–æ –ø—Ä–æ–±–µ–ª–∞–º –∏ –±–µ—Ä–µ–º 5-–π —ç–ª–µ–º–µ–Ω—Ç (—Ç–∞–º, –≥–¥–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã)
        # –í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ —ç—Ç–æ –±—É–¥–µ—Ç "50%"
        usage_str = data_line.split()[4]
        
        # –£–±–∏—Ä–∞–µ–º –∑–Ω–∞–∫ '%' –∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º –≤ —á–∏—Å–ª–æ
        usage_percent = int(usage_str.replace('%', ''))
        
        print(f"–¢–µ–∫—É—â–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∏—Å–∫–∞: {usage_percent}%")
        
        if usage_percent > threshold:
            print("üî¥ ALARM: –î–∏—Å–∫ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω! –ë–æ–ª—å—à–µ 90%")
        else:
            print("üü¢ OK: –ú–µ—Å—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.")
            
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –¥–∏—Å–∫–∞: {e}")

# –ó–∞–ø—É—Å–∫ —Ñ—É–Ω–∫—Ü–∏–∏
if __name__ == "__main__":
    check_disk_usage()